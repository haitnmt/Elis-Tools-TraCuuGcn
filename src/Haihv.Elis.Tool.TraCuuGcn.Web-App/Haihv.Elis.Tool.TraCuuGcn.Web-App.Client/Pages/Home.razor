@page "/"
@rendermode  InteractiveWebAssembly

<MudStack Class="ma-2" Style="@(string.IsNullOrWhiteSpace(_searchQuery) ? "height: calc((1 / 3)*(100vh - 50px))" : "")" Justify="Justify.FlexEnd">
    <MudGrid Justify="Justify.Center">
        <MudItem xs="12" md="6" lg="4">
            <MudStack>
                <SearchBar AutoStopCamera="true" @bind-Result="@_searchQuery"/>
                @if (!string.IsNullOrWhiteSpace(_searchQuery))
                { 
                    <ThongTinGiayChungNhan Query="@_searchQuery"
                                           @bind-MaGcnElis="@_maGcnElis"/>
                }
            </MudStack>
        </MudItem>
        @if (_maGcnElis > 0)
        {
            <AuthorizeView>
                <Authorized>
                    <MudItem xs="12" md="6" lg="4">
                        <MudStack>
                            <ThongTinChuSuDung/>
                            <ThongTinThuaDat/>
                            <ThongTinTaiSan/>
                        </MudStack>
                    </MudItem>
                    <MudItem xs="12" md="6" lg="4">
                        <ThuaDatLocation/>
                    </MudItem>
                </Authorized>
                <NotAuthorized>
                    <MudItem xs="12" md="6" lg="4">
                        <MudAlert Severity="Severity.Warning">Bạn cần đăng nhập để xem thông tin chi tiết</MudAlert>
                    </MudItem>
                </NotAuthorized>
            </AuthorizeView>
        }
    </MudGrid>
</MudStack>
<About/>
@code {
    private string? _searchQuery;
    private long _maGcnElis;
}